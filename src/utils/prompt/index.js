const systemInstructions = "Eres un asistente experto en an√°lisis de cartas informativas de hechos delictivos. Tu tarea es leer atentamente la carta policial y devolver un **objeto JSON v√°lido**, extrayendo la informaci√≥n clave solicitada.\nA continuacion, te doy una lista de datos que tendras que usar para comparar y extraer algunos datos y luego te especifico que datos extraer y como hacerlo."

const justicesList = "lista de justicias interventoras:\n\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 1\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 2\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 3\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 4\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 5\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 6\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 7\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 8\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 9\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 10\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 11\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 12\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 13\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 14\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 15\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 16\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 17\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 18\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 19\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 20\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 21\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 22\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 23\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 24\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 25\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 26\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 27\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 28\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 29\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 30\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 31\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 32\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 34\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 35\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 36\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 37\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 38\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 39\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 40\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 41\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 42\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 43\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 44\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 45\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 46\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 47\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 48\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 49\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 50\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 51\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 52\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 53\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 54\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 55\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 56\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 57\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 58\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 59\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 60\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 61\nFiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 62\nFiscal√≠a de Distrito de los Barrios de Saavedra y Nu√±ez\nFiscal√≠a de Distrito del Barrio de la Boca\nUFECRI"

const dependenciaList = "lista de dependencias:\n\nCOMISARIA VECINAL 1A\nCOMISARIA VECINAL 1B\nCOMISARIA VECINAL 1B ANEXO\nCOMISARIA VECINAL 1C\nCOMISARIA VECINAL 1C ANEXO\nCOMISARIA VECINAL 1D\nCOMISARIA VECINAL 1E\nCOMISARIA VECINAL 1F\nCOMISARIA VECINAL 2A\nCOMISARIA VECINAL 2B\nCOMISARIA VECINAL 3A\nCOMISARIA VECINAL 3A ANEXO\nCOMISARIA VECINAL 3B\nCOMISARIA VECINAL 3C\nCOMISARIA VECINAL 4A\nCOMISARIA VECINAL 4B\nCOMISARIA VECINAL 4C\nCOMISARIA VECINAL 4D\nCOMISARIA VECINAL 4D ANEXO\nCOMISARIA VECINAL 5A\nCOMISARIA VECINAL 5B\nCOMISARIA VECINAL 6A\nCOMISARIA VECINAL 6B\nCOMISARIA VECINAL 7A\nCOMISARIA VECINAL 7B\nCOMISARIA VECINAL 7C\nCOMISARIA VECINAL 8A\nCOMISARIA VECINAL 8B\nCOMISARIA VECINAL 8C\nCOMISARIA VECINAL 9A\nCOMISARIA VECINAL 9B\nCOMISARIA VECINAL 9C\nCOMISARIA VECINAL 10A\nCOMISARIA VECINAL 10B\nCOMISARIA VECINAL 10C\nCOMISARIA VECINAL 11A\nCOMISARIA VECINAL 11B\nCOMISARIA VECINAL 11B ANEXO\nCOMISARIA VECINAL 12A\nCOMISARIA VECINAL 12B\nCOMISARIA VECINAL 12C\nCOMISARIA VECINAL 13A\nCOMISARIA VECINAL 13B\nCOMISARIA VECINAL 13C\nCOMISARIA VECINAL 14A\nCOMISARIA VECINAL 14B\nCOMISARIA VECINAL 14C\nCOMISARIA VECINAL 15A\nCOMISARIA VECINAL 15B\nCOMISARIA VECINAL 15C\nDIVISION CAPTURA Y PROFUGOS\nDIVISION CONTRAVENCIONES Y FALTAS CONTRA EL ORDEN PUBLICO\nDIVISION DEFRAUD Y ESTAFAS\nDIVISION DELITOS CONTRA LA INTEGRIDAD SEXUAL\nDIVISION DELITOS CONTRA GRUPOS VULNERABLES\nDIVISION DELITOS CONTRA LA SALUD Y SEGURIDAD PERSONAL\nDIVISION HOMICIDIOS\nDIVISION INFANCIA Y ADOLESCENCIA\nDIVISION INVESTIGACIONES DE ORGANIZACIONES CRIMINALES\nDIVISION INV DEL ROBO ORG- PFA\nDIVISION PERSONAS EXTRAVIADAS\nDIVISION ROBOS Y HURTOS NORTE\nDIVISION ROBOS Y HURTOS SUR\nDIVISION SUSTRACCION DE AUTOMOTORES Y AUTOPARTES\nDIVISION INVESTIGACIONES COMUNALES 1 NORTE\nDIVISION INVESTIGACIONES COMUNALES 1 SUR\nDIVISION INVESTIGACIONES COMUNALES 2\nDIVISION INVESTIGACIONES COMUNALES 3\nDIVISION INVESTIGACIONES COMUNALES 4\nDIVISION INVESTIGACIONES COMUNALES 5\nDIVISION INVESTIGACIONES COMUNALES 6\nDIVISION INVESTIGACIONES COMUNALES 7\nDIVISION INVESTIGACIONES COMUNALES 8\nDIVISION INVESTIGACIONES COMUNALES 9\nDIVISION INVESTIGACIONES COMUNALES 10\nDIVISION INVESTIGACIONES COMUNALES 11\nDIVISION INVESTIGACIONES COMUNALES 12\nDIVISION INVESTIGACIONES COMUNALES 13\nDIVISION INVESTIGACIONES COMUNALES 14\nDIVISION INVESTIGACIONES COMUNALES 15\nDEPARTAMENTO ANTISECUESTROS NORTE - PFA\nDEPARTAMENTO ANTISECUESTROS SUR - PFA\nDEPARTAMENTO INTELIGENCIA CONTRA EL CRIMEN ORGANIZADO - PFA\nSECCION ROBO DE MERCADERIA EN TRANSITO\nUFECRI\nDDI LA MATANZA\nDIVISIONES INVESTIGACIONES ESPECIALES\nCOMISARIA VICENTE LOPEZ 5TA\nDEPARTAMENTAL DE ESCOBAR\nDDI ESCOBAR\nCOMISARIA 3RA SAN FERNANDO\nDDI LANUS\nPOLICIA LOCAL LANUS\nDDI BERAZATEGUI\nDDI AVELLANEDA-LANUS\nDIVISION CONTRAVENCIONES Y FALTAS EVENTOS MASIVOS\nUOCNIDG1 DEL ESTE PSA\nDIVISION FALSIFICACION DE MONEDA PFA\nDICCO PFA\nDIVISION ANTIFRAUDES PFA\nDIVISION ANTIRERRORISMO"; // toda la lista

const modalidadesList = "lista de modalidades:\nABUSO SEXUAL\nAV. ILICITO\nAV. SUICIDIO\nCHOQUE Y LESIONES\nESTAFA (CUENTO DEL T√çO)\nESTAFA VIRTUAL\nEVASION\nHALLAZGO\nHERIDO DE ARMA (BLANCA / FUEGO)\nHOMICIDIO\nHURTO\nHURTO AGRAVADO FINCA / COMERCIO\nHURTO AGRAVADO VEHIC. VIA PUB. (HILUX)\nHURTO AGRAVADO VEHIC. VIA PUB. (SW4)\nHURTO AGRAVADO VEHICULOS\nINCENDIO CONTENEDOR\nINFRACCION LEY N¬∫ 23737\nLESIONES GRAVES\nOTROS (ACLARAR EN RESE√ëA)\nPARADERO\nROBO AMA\nROBO AMA AUTOMOTOR\nROBO ARREBATO\nROBO AUTOMOTOR\nROBO AUTOPARTES\nROBO EN AUSENCIA\nROBO EN AUSENCIA (COMERCIO)\nROBO EN COMERCIO (SIN ARMAS)\nROBO EN FINCA\nROBO EN FINCA (POR ESCALAMIENTO)\nROBO MOTOCHORRO\nROBO MOTOCHORRO (ROLERO)\nROBO POBLADO Y EN BANDA\nROBO Y LESIONES\nROBO Y PIL (MERC. EN TRANSITO)\nROBO Y PIL (INT. COMERCIO)\nROBO Y PIL (INT. FINCA)\nSALIDERA BANCARIA\nSECUESTRO EXTORSIVO\nSIN EFECTO\nTRATA DE PERSONAS\nTTVA. HOMICIDIO\nTTVA. ROBO / HURTO\nVIUDA NEGRA\nVIUDA NEGRA CON OBITO"

const instructions = "üìå **Instrucciones**:\n1. Extrae todos los campos indicados.\n2. Si alguno no aparece en la carta, coloca un guion (\"-\").\n3. **Los campos que dependen de listas deben seleccionarse exactamente como est√°n en las listas provistas**.\n4. Devuelve solo un objeto JSON. **Sin explicaci√≥n, sin texto adicional ni saltos de l√≠nea innecesarios.**\n\nüîç **Campos requeridos**:\n- **number**: n√∫mero o c√≥digo del suceso.\n- **eventDate**: solo en formato aaaa-mm-dd.\n-**injuredDni**: DNI del damnificado.\n-**injuredName**: nombre del damnificado.\n-**injuredLastName**: apellido del damnificado.\n- **callTime**: hora del llamado (formato hh:mm:ss).\n**modalitie**:tipo de hecho delictivo, concatena el tipo con el subtipo de hecho y selecciona uno de la lista de modalidades, si no coincide agregar un string vacio.\n- **jurisdiction**: seleccionar una opci√≥n exacta de la lista de dependencias.\n-**justice**: si menciona justicia que labro actuaciones, seleccionar una de la lista de justicias interventoras, si no esta en la lista colocala respetando mayusculas y minusculas, si no menciona devolver un string vacio.\n-**fiscal**: si menciona fiscal a cargo de las actuaciones, agregarlo en mayuscula, con el prefijo DR. o DRA. , si no menciona devolver un string vacio.\n-**secretariat**:  si menciona secretaria a cargo de las actuaciones, agregarlo en mayuscula, con el prefijo DR. o DRA. , si no menciona devolver un string vacio.\n- **direction**: calle y altura o intersecci√≥n (sin barrio ni ciudad, siguiendo el siguiente formato: calle altura o calle e interseccion, por ejemplo: Av. Rivadavia 1050), may√∫sculas y min√∫sculas respetando la gram√°tica.\n- **review**:\n  - El texto debe estar redactado con may√∫sculas y min√∫sculas respetando la gram√°tica (por ejemplo: nombres propios, art√≠culos, abreviaciones como ‚ÄúDr.‚Äù o ‚Äúa/c‚Äù, etc.).\n  - No escribir todo el texto en may√∫sculas.\n  - El texto completo debe estar redactado como un parte policial, con precisi√≥n y estilo formal.\n  - Relato detallado con t√©rminos policiales.\n  - Mencionar autores, caracter√≠sticas f√≠sicas, accionar, veh√≠culos, objetos sustra√≠dos.\n  - Mencionar c√°maras del cmu (centro de monitoreo urbano o camaras privadas) y horarios individualizados por camara solo si aportaron informaci√≥n relevante.\n  - Finalizar con la actuaci√≥n de la fiscal√≠a si corresponde (colocarla completa)."

const outputExample = "\nüßæ **Ejemplo de salida esperada**:\n{\n  \"number\": \"45145678\",\n  \"eventDate\": \"13-05-2025\",\n  \"callTime\": \"22:30\",\n  \"jurisdiction\": \"COMISARIA VECINAL 9B\",\n  \"direction\": \"AV. RIVADAVIA 10100\",\n \"justice\":\"Fiscal√≠a Nacional en lo Criminal y Correccional N¬∞ 1\",\n \"fiscal\":\"DR. RAMIREZ\",\n \"secretariat\":\"DRA. ROSALES\",\n  \"review\": \"Personal policial entrevista a la damnificada Jennifer Laura Glibbery, quien refer√≠a en primer instancia que se lesion√≥ ambas manos con una botella de vidrio. Posteriormente, expresa que habr√≠a sido privada de la libertad por un masculino que la subi√≥ a un veh√≠culo Ecosport blanco dominio AC295UC, del que no recuerda caracter√≠sticas, y que habr√≠a provocado la lesi√≥n con un objeto que no logr√≥ reconocer. La damnificada se encontraba en estado de alcoholemia. El hecho fue registrado por c√°mara CONSTITUCION08 donde se observa la llegada, descenso y posterior traslado de la femenina asistida por SAME a HTAL Penna con diagn√≥stico de herida cortante en mano derecha. Participaron imputados: 1) Omar (nacionalidad peruana), 2) Ezequiel Andr√©s Rodr√≠guez (ex pareja). Se solicit√≥ al CMU el seguimiento por c√°maras aleda√±as y l√≠nea de tiempo. Se observa al masculino descendiendo del rodado e ingresando al Hotel Rind y Narciso, habitaci√≥n 202. Cuatro m√≥viles policiales en el lugar. No se informa actuaci√≥n espec√≠fica de fiscal√≠a.\"\n}\nüßæsi no es un texto relacionado a un hecho delicitvo que contenga lo solicitado devolver lo siguiente:\n{\n  message: \"El archivo no es un suceso delictivo\"\n}"

export function buildPrompt(userText) {
  return [
    { role: 'system', content: systemInstructions },
    { role: 'system', content: `${justicesList}` },
    { role: 'system', content: `${dependenciaList}` },
    { role: 'system', content: `${modalidadesList}` },
    { role: 'system', content: instructions },
    { role: 'system', content: outputExample },
    { role: 'user', content: userText }
  ];
}
